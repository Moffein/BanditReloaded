// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 16.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace RoRSkinBuilder
{
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using RoRSkinBuilder.Data;
    using UnityEngine.Rendering;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class PluginCodeTemplate : PluginCodeTemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write("using BepInEx;\r\nusing R2API;\r\nusing R2API.Utils;\r\nusing RoR2;\r\nusing System;\r\nusi" +
                    "ng System.Collections.Generic;\r\nusing System.Reflection;\r\nusing System.Linq;\r\nus" +
                    "ing UnityEngine;\r\n\r\nnamespace ");
            
            #line 18 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.uccModName));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n");
            
            #line 20 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var dependency in DistinctDependencies) { 
            
            #line default
            #line hidden
            this.Write("    [BepInDependency(\"");
            
            #line 21 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(dependency.Key));
            
            #line default
            #line hidden
            this.Write("\", BepInDependency.DependencyFlags.");
            
            #line 21 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Enum.GetName(typeof(DependencyType), dependency.Value)));
            
            #line default
            #line hidden
            this.Write(")]\r\n");
            
            #line 22 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    [R2APISubmoduleDependency(nameof(LoadoutAPI), nameof(LanguageAPI))]\r\n    [Net" +
                    "workCompatibility(CompatibilityLevel.NoNeedForSync)]\r\n    [BepInDependency(\"com." +
                    "bepis.r2api\")]\r\n    [BepInPlugin(\"com.");
            
            #line 26 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(SkinModInfo.author));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 26 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.uccModName));
            
            #line default
            #line hidden
            this.Write("\",\"");
            
            #line 26 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(SkinModInfo.modName));
            
            #line default
            #line hidden
            this.Write("\",\"");
            
            #line 26 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(SkinModInfo.version));
            
            #line default
            #line hidden
            this.Write("\")]\r\n    public partial class ");
            
            #line 27 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.uccModName));
            
            #line default
            #line hidden
            this.Write("Plugin : BaseUnityPlugin\r\n    {\r\n        private static AssetBundle assetBundle;\r" +
                    "\n");
            
            #line 30 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (AssetsInfo.materialsWithRoRShader.Count != 0) { 
            
            #line default
            #line hidden
            this.Write("        private static readonly List<Material> materialsWithRoRShader = new List<" +
                    "Material>();\r\n");
            
            #line 32 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("        private void Awake()\r\n        {\r\n            BeforeAwake();\r\n            " +
                    "using (var assetStream = Assembly.GetExecutingAssembly().GetManifestResourceStre" +
                    "am(\"");
            
            #line 36 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.uccModName));
            
            #line default
            #line hidden
            this.Write(".");
            
            #line 36 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.assetBundleName));
            
            #line default
            #line hidden
            this.Write(@"""))
            {
                assetBundle = AssetBundle.LoadFromStream(assetStream);
            }

            On.RoR2.BodyCatalog.Init += BodyCatalogInit;

            ReplaceShaders();
            AddLanguageTokens();

            AfterAwake();
        }

        partial void BeforeAwake();
        partial void AfterAwake();
        static partial void BeforeBodyCatalogInit();
        static partial void AfterBodyCatalogInit();

        private static void ReplaceShaders()
        {
");
            
            #line 56 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var material in AssetsInfo.materialsWithRoRShader) { 
            
            #line default
            #line hidden
            this.Write("            materialsWithRoRShader.Add(LoadMaterialWithReplacedShader(@\"");
            
            #line 57 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.materialPaths[material.Key]));
            
            #line default
            #line hidden
            this.Write("\", @\"");
            
            #line 57 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(material.Value));
            
            #line default
            #line hidden
            this.Write("\"));\r\n");
            
            #line 58 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"        }

        private static Material LoadMaterialWithReplacedShader(string materialPath, string shaderName)
        {
            var material = assetBundle.LoadAsset<Material>(materialPath);
            material.shader = Shader.Find(shaderName);

            return material;
        }

        private static void AddLanguageTokens()
        {
");
            
            #line 71 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var skin in ReorderedSkins) {
    if (skin.nameTokenLocalizations.Count == 0) {
        continue;
    }
    var defaultLocalization = skin.nameTokenLocalizations.FirstOrDefault(el => el.language.ToLower() == "en") ?? skin.nameTokenLocalizations.First(); 
            
            #line default
            #line hidden
            this.Write("            LanguageAPI.Add(\"");
            
            #line 76 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.CreateNameToken(SkinModInfo.author)));
            
            #line default
            #line hidden
            this.Write("\", \"");
            
            #line 76 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(defaultLocalization.value));
            
            #line default
            #line hidden
            this.Write("\");\r\n");
            
            #line 77 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var localization in skin.nameTokenLocalizations) { 
            
            #line default
            #line hidden
            this.Write("            LanguageAPI.Add(\"");
            
            #line 78 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.CreateNameToken(SkinModInfo.author)));
            
            #line default
            #line hidden
            this.Write("\", \"");
            
            #line 78 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(localization.value));
            
            #line default
            #line hidden
            this.Write("\", \"");
            
            #line 78 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(localization.language));
            
            #line default
            #line hidden
            this.Write("\");\r\n");
            
            #line 79 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
  }
} 
            
            #line default
            #line hidden
            this.Write("        }\r\n\r\n        private static void BodyCatalogInit(On.RoR2.BodyCatalog.orig" +
                    "_Init orig)\r\n        {\r\n            orig();\r\n\r\n            BeforeBodyCatalogInit" +
                    "();\r\n\r\n");
            
            #line 89 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var skin in ReorderedSkins) { 
            
            #line default
            #line hidden
            this.Write("            Add");
            
            #line 90 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.bodyName.ToUpperCamelCase()));
            
            #line default
            #line hidden
            
            #line 90 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.name.ToUpperCamelCase()));
            
            #line default
            #line hidden
            this.Write("Skin();\r\n");
            
            #line 91 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n            AfterBodyCatalogInit();\r\n        }\r\n");
            
            #line 95 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var skin in ReorderedSkins) { 
            
            #line default
            #line hidden
            this.Write("\r\n        static partial void ");
            
            #line 97 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.bodyName.ToUpperCamelCase()));
            
            #line default
            #line hidden
            
            #line 97 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.name.ToUpperCamelCase()));
            
            #line default
            #line hidden
            this.Write("SkinAdded(SkinDef skinDef, GameObject bodyPrefab);\r\n\r\n        private static void" +
                    " Add");
            
            #line 99 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.bodyName.ToUpperCamelCase()));
            
            #line default
            #line hidden
            
            #line 99 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.name.ToUpperCamelCase()));
            
            #line default
            #line hidden
            this.Write("Skin()\r\n        {\r\n");
            
            #line 101 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (!string.IsNullOrWhiteSpace(skin.modDependency.value) && skin.modDependency.type == DependencyType.SoftDependency) { 
            
            #line default
            #line hidden
            this.Write("            if (!BepInEx.Bootstrap.Chainloader.PluginInfos.ContainsKey(\"");
            
            #line 102 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.modDependency.value));
            
            #line default
            #line hidden
            this.Write("\"))\r\n            {\r\n                return;\r\n            }\r\n");
            
            #line 106 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("            var bodyName = \"");
            
            #line 107 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.bodyName));
            
            #line default
            #line hidden
            this.Write("\";\r\n            var skinName = \"");
            
            #line 108 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.name));
            
            #line default
            #line hidden
            this.Write(@""";
            try
            {
                var bodyPrefab = BodyCatalog.FindBodyPrefab(bodyName);

                var renderers = bodyPrefab.GetComponentsInChildren<Renderer>(true);
                var skinController = bodyPrefab.GetComponentInChildren<ModelSkinController>();
                var mdl = skinController.gameObject;

                var skin = new LoadoutAPI.SkinDefInfo
                {
");
            
            #line 119 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (!skin.icon.createFromColors && skin.icon.sprite != null) { 
            
            #line default
            #line hidden
            this.Write("                    Icon = assetBundle.LoadAsset<Sprite>(@\"");
            
            #line 120 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.iconPaths[skin.icon.sprite]));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 121 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    Icon = assetBundle.LoadAsset<Sprite>(@\"");
            
            #line 122 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.iconFromColorPaths[skin.icon.colors]));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 123 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    Name = skinName,\r\n                    NameToken = \"");
            
            #line 125 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.CreateNameToken(SkinModInfo.author)));
            
            #line default
            #line hidden
            this.Write("\",\r\n                    RootObject = mdl,\r\n");
            
            #line 127 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (skin.baseSkins.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    BaseSkins = Array.Empty<SkinDef>(),\r\n");
            
            #line 129 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    BaseSkins = new SkinDef[] \r\n                    { \r\n");
            
            #line 132 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var reference in skin.baseSkins) { 
    if (reference.accessType == AccessType.ByIndex) { 
            
            #line default
            #line hidden
            this.Write("                        skinController.skins[");
            
            #line 134 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(reference.index));
            
            #line default
            #line hidden
            this.Write("],\r\n");
            
            #line 135 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                        skinController.skins.First(s => s.Name == \"");
            
            #line 136 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(reference.name));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 137 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
} 
            
            #line default
            #line hidden
            this.Write("                    },\r\n");
            
            #line 140 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    UnlockableName = \"");
            
            #line 141 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.unlockableName));
            
            #line default
            #line hidden
            this.Write("\",\r\n");
            
            #line 142 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (skin.gameObjectActivations.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    GameObjectActivations = Array.Empty<SkinDef.GameObjectActivat" +
                    "ion>(),\r\n");
            
            #line 144 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    GameObjectActivations = new SkinDef.GameObjectActivation[]\r\n " +
                    "                   {\r\n");
            
            #line 147 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var activation in skin.gameObjectActivations) { 
            
            #line default
            #line hidden
            this.Write("                        new SkinDef.GameObjectActivation\r\n                       " +
                    " {\r\n                            gameObject = renderers[");
            
            #line 150 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(activation.rendererIndex));
            
            #line default
            #line hidden
            this.Write("].gameObject,\r\n                            shouldActivate = ");
            
            #line 151 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (activation.shouldActivate) 
            
            #line default
            #line hidden
            this.Write("true\r\n");
            
            #line 152 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 else 
            
            #line default
            #line hidden
            this.Write("false\r\n                        },\r\n");
            
            #line 154 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    },\r\n");
            
            #line 156 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
if (skin.rendererInfos.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    RendererInfos = Array.Empty<CharacterModel.RendererInfo>(),\r\n" +
                    "");
            
            #line 159 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    RendererInfos = new CharacterModel.RendererInfo[]\r\n          " +
                    "          {\r\n");
            
            #line 162 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var rendererInfo in skin.rendererInfos) { 
            
            #line default
            #line hidden
            this.Write("                        new CharacterModel.RendererInfo\r\n                        " +
                    "{\r\n");
            
            #line 165 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (rendererInfo.defaultMaterial == null) { 
            
            #line default
            #line hidden
            this.Write("                            defaultMaterial = null,\r\n");
            
            #line 167 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            defaultMaterial = assetBundle.LoadAsset<Material>(@\"");
            
            #line 168 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.materialPaths[rendererInfo.defaultMaterial]));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 169 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                            defaultShadowCastingMode = UnityEngine.Rendering.Shad" +
                    "owCastingMode.");
            
            #line 170 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Enum.GetName(typeof(ShadowCastingMode), rendererInfo.defaultShadowCastingMode)));
            
            #line default
            #line hidden
            this.Write(",\r\n                            ignoreOverlays = ");
            
            #line 171 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (rendererInfo.ignoreOverlays) 
            
            #line default
            #line hidden
            this.Write("true,\r\n");
            
            #line 172 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 else 
            
            #line default
            #line hidden
            this.Write("false,\r\n");
            
            #line 173 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (rendererInfo.rendererReference.accessType == AccessType.ByIndex) { 
            
            #line default
            #line hidden
            this.Write("                            renderer = renderers[");
            
            #line 174 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(rendererInfo.rendererReference.index));
            
            #line default
            #line hidden
            this.Write("]\r\n");
            
            #line 175 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            renderer = renderers.First(r => r.name == \"");
            
            #line 176 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(rendererInfo.rendererReference.name));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 177 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                        },\r\n");
            
            #line 179 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    },\r\n");
            
            #line 181 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 }
if (skin.meshReplacements.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    MeshReplacements = Array.Empty<SkinDef.MeshReplacement>(),\r\n");
            
            #line 184 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    MeshReplacements = new SkinDef.MeshReplacement[]\r\n           " +
                    "         {\r\n");
            
            #line 187 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var replacement in skin.meshReplacements) { 
            
            #line default
            #line hidden
            this.Write("                        new SkinDef.MeshReplacement\r\n                        {\r\n");
            
            #line 190 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (replacement.mesh == null) { 
            
            #line default
            #line hidden
            this.Write("                            mesh = null,\r\n");
            
            #line 192 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            mesh = assetBundle.LoadAsset<Mesh>(@\"");
            
            #line 193 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.meshPaths[replacement.mesh]));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 194 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
if (replacement.rendererReference.accessType == AccessType.ByIndex) { 
            
            #line default
            #line hidden
            this.Write("                            renderer = renderers[");
            
            #line 196 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.rendererReference.index));
            
            #line default
            #line hidden
            this.Write("]\r\n");
            
            #line 197 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            renderer = renderers.First(r => r.name == \"");
            
            #line 198 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.rendererReference.name));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 199 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                        },\r\n");
            
            #line 201 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    },\r\n");
            
            #line 203 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 }
if (skin.minionSkinReplacements.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    MinionSkinReplacements = Array.Empty<SkinDef.MinionSkinReplac" +
                    "ement>(),\r\n");
            
            #line 206 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    MinionSkinReplacements = new SkinDef.MinionSkinReplacement[]\r" +
                    "\n                    {\r\n");
            
            #line 209 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var replacement in skin.minionSkinReplacements) {
    if (!replacement.findSkinByReference && replacement.skin == null) {
        continue;
    } 
            
            #line default
            #line hidden
            this.Write("                        new SkinDef.MinionSkinReplacement\r\n                      " +
                    "  {\r\n                            minionBodyPrefab = BodyCatalog.FindBodyPrefab(@" +
                    "\"");
            
            #line 215 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.bodyName));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 216 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (replacement.findSkinByReference) { 
    if (replacement.reference.accessType == AccessType.ByIndex) { 
            
            #line default
            #line hidden
            this.Write("                            minionSkin = BodyCatalog.GetBodySkins(BodyCatalog.Fin" +
                    "dBodyIndex(@\"");
            
            #line 218 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.bodyName));
            
            #line default
            #line hidden
            this.Write("\"))[");
            
            #line 218 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.reference.index));
            
            #line default
            #line hidden
            this.Write("]\r\n");
            
            #line 219 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            minionSkin = BodyCatalog.GetBodySkins(BodyCatalog.Fin" +
                    "dBodyIndex(@\"");
            
            #line 220 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.bodyName));
            
            #line default
            #line hidden
            this.Write("\")).First(s => s.name == @\"");
            
            #line 220 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.reference.name));
            
            #line default
            #line hidden
            this.Write("\")\r\n    ");
            
            #line 221 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 }
} else { 
            
            #line default
            #line hidden
            this.Write("                            minionSkin = BodyCatalog.GetBodySkins(BodyCatalog.Fin" +
                    "dBodyIndex(@\"");
            
            #line 223 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.bodyName));
            
            #line default
            #line hidden
            this.Write("\")).First(s => s.name == @\"");
            
            #line 223 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.skin.name));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 224 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                        }\r\n");
            
            #line 226 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    },\r\n");
            
            #line 228 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
if (skin.projectileGhostReplacements.Count == 0) { 
            
            #line default
            #line hidden
            this.Write("                    ProjectileGhostReplacements = Array.Empty<SkinDef.ProjectileG" +
                    "hostReplacement>()\r\n");
            
            #line 231 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                    ProjectileGhostReplacements = new SkinDef.ProjectileGhostRepl" +
                    "acement[]\r\n                    {\r\n");
            
            #line 234 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 foreach (var replacement in skin.projectileGhostReplacements) { 
            
            #line default
            #line hidden
            this.Write("                        new SkinDef.ProjectileGhostReplacement\r\n                 " +
                    "       {\r\n                            projectilePrefab = Resources.Load<GameObje" +
                    "ct>(@\"");
            
            #line 237 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.projectilePath));
            
            #line default
            #line hidden
            this.Write("\"),\r\n");
            
            #line 238 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 if (replacement.useResourcesPath) { 
            
            #line default
            #line hidden
            this.Write("                            projectileGhostReplacementPrefab = Resources.Load<Gam" +
                    "eObject>(@\"");
            
            #line 239 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(replacement.projectileGhostPath));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 240 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } else { 
            
            #line default
            #line hidden
            this.Write("                            projectileGhostReplacementPrefab = assetBundle.LoadAs" +
                    "set<GameObject>(@\"");
            
            #line 241 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AssetsInfo.gameObjectPaths[replacement.projectileGhost]));
            
            #line default
            #line hidden
            this.Write("\")\r\n");
            
            #line 242 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                        },\r\n");
            
            #line 244 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("                    }\r\n");
            
            #line 246 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write(@"                };

                Array.Resize(ref skinController.skins, skinController.skins.Length + 1);
                skinController.skins[skinController.skins.Length - 1] = LoadoutAPI.CreateNewSkinDef(skin);

                var skinsField = typeof(BodyCatalog).GetFieldValue<SkinDef[][]>(""skins"");
                skinsField[BodyCatalog.FindBodyIndex(bodyPrefab)] = skinController.skins;
                ");
            
            #line 254 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.bodyName.ToUpperCamelCase()));
            
            #line default
            #line hidden
            
            #line 254 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(skin.name.ToUpperCamelCase()));
            
            #line default
            #line hidden
            this.Write(@"SkinAdded(skinController.skins[skinController.skins.Length - 1], bodyPrefab);
            }
            catch (Exception e)
            {
                Debug.LogWarning($""Failed to add \""{skinName}\"" skin to \""{bodyName}\"""");
                Debug.LogError(e);
            }
        }
");
            
            #line 262 "D:\RoR2 Modding\RoRSkinModCreator\RoRSkinModCreator\CodeGeneration\PluginCodeTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("    }\r\n}\r\n");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
}
